<div class="h-full overflow-y-auto px-2 sm:px-4">
  <h1 class="font-bold text-lg sm:text-xl p-2 my-4">
    Konfigurations-Uebersicht
  </h1>

  @if (!data()) {
    <p-panel [toggleable]="false">
      <p class="m-0">Daten werden geladen...</p>
    </p-panel>
  } @else if (data()!.length === 0) {
    <p-panel [toggleable]="false">
      <p class="m-0">Keine Konfigurationen vorhanden.</p>
    </p-panel>
  } @else if (data()!.length > 0) {
    <div class="overflow-x-auto -mx-2 sm:mx-0">
      <p-table
        [value]="data()!"
        stripedRows
        [tableStyle]="{ 'min-width': '40rem' }"
        selectionMode="single"
        [resizableColumns]="true"
        dataKey="id"
      >
        <ng-template #header>
          <tr>
            @for (column of data()![0].propertiesToShow; track column) {
              <th>{{ data()![0].getUiNameForProperty(column) }}</th>
            }
          </tr>
        </ng-template>
        <ng-template #body let-config>
          <tr
            (click)="openDisplay(config.id)"
            [pSelectableRow]="config"
            class="cursor-pointer"
          >
            @for (column of data()![0].propertiesToShow; track column) {
              <td style="white-space: pre-wrap">
                {{ config.getPropertyValue(column) }}
              </td>
            }
          </tr>
        </ng-template>
      </p-table>
    </div>
    <sftech-paginator
      [pagination]="odata().pagination"
      (odataChanged)="updatePagination($event)"
    ></sftech-paginator>
    <div class="flex justify-end p-2">
      <p-button (onClick)="openDisplay(undefined)">
        <span>Neue Konfiguration</span>
      </p-button>
    </div>
  }
</div>
